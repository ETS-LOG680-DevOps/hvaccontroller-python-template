language: python
python:
  - "3.8"
services:
  - docker
# Build docker image and test
before_install:
  - docker build -t labo2:latest .
  - docker ps -a
  - docker run labo2:latest python3 test/test_main.py
# command to run tests
#script:
#  - python test/test_main.py
# Push the docker image on main
deploy:
  provider: script
  script: bash docker_deploy
  on:
    branch: main
